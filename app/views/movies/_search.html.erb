<%= form_with url: search_movies_path(user_id: @user.id, tier_list_id: @tier_list.id), method: :get, local: true do %>
    <%= text_field_tag :query, params[:query], placeholder: "Search for a movie" %>
    <%= submit_tag "Search" %>
<% end %>

<% if defined?(@movies) && @movies.any? %>
    <div class="bg-white shadow-md rounded-lg p-6 mb-8">
        <h2 class="text-2xl font-bold text-gray-800 mb-4">Search Results</h2>
        <ul>
            <% @movies.each do |movie| %>
                <% detailed_movie = movie_details(movie) %>
                <li>
                    <% if detailed_movie.poster_path.present? %>
                    <img src="<%= movie_poster(detailed_movie) %>" alt="<%= detailed_movie.title %> Poster" class="w-12 h-16 object-cover rounded-md transition-transform duration-200 group-hover:scale-110">
                    <% end %>
                    <%= detailed_movie.title %> (<%= detailed_movie.release_date %>)
                </li>
            <% end %>
        </ul>
    </div>
<% end %>